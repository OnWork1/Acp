// Configure your import map in config/importmap.rb. Read more: https://github.com/rails/importmap-rails

<% if Rails.env.production? && ENV['SENTRY_JS_ENABLED'] %>
  import "components/sentry"
<% end %>
import "trix"
import "@rails/actiontext"
import "controllers/admin"

const allowedTypes = ["image/png", "image/jpg", "image/jpeg", "image/gif"]

document.addEventListener("trix-file-accept", e => {
  if (!allowedTypes.includes(e.file.type)) {
    e.preventDefault();
    alert("Only images are allowed!");
  }
})

Trix.config.attachments.preview.caption = { name: false, size: false }


// Active Admin
import "flowbite"
import Rails from "@rails/ujs"
import "active_admin/features/batch_actions"
import "active_admin/features/dark_mode_toggle"
import "active_admin/features/has_many"
import "active_admin/features/filters"
import "active_admin/features/main_menu"
import "active_admin/features/per_page"

Rails.start()
